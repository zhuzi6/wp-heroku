(self.webpackChunksakurairo_scripts=self.webpackChunksakurairo_scripts||[]).push([[240],{9905:e=>{var t=0;function n(e,t){var n=t.data;if(Array.isArray(n)&&!(n.length<2)){var r=n[0],a=n[1],o=n[2],s=e._callbacks[r];s&&(delete e._callbacks[r],s(a,o))}}function r(e){var t=this;t._worker=e,t._callbacks={},e.addEventListener("message",(function(e){n(t,e)}))}r.prototype.postMessage=function(e){var r=this,a=t++,o=[a,e];return new Promise((function(e,t){if(r._callbacks[a]=function(n,r){if(n)return t(new Error(n.message));e(r)},void 0!==r._worker.controller){var s=new MessageChannel;s.port1.onmessage=function(e){n(r,e)},r._worker.controller.postMessage(o,[s.port2])}else r._worker.postMessage(o)}))},e.exports=r},8240:(e,t,n)=>{function r(e,t,n){const{naturalWidth:r,naturalHeight:a}=t,o=r*a/n;if(o>1){const n=r/Math.sqrt(o),s=a/Math.sqrt(o),c=e(n,s);return c?.drawImage(t,0,0,n,s),c?.getImageData(0,0,n,s)}{const n=e(r,a);return n?.drawImage(t,0,0),n?.getImageData(0,0,r,a)}}function a(e,t){const n=document.createElement("canvas"),r=n.getContext("2d");return n.height=t,n.width=e,r}n.r(t),n.d(t,{init:()=>i,updateThemeSkin:()=>c});var o=n(9905);let s=new(n.n(o)())(new Worker(new URL(n.p+n.u(934),n.b)));async function c(e){const t=document.createElement("img");t.src=e,await function(e){return new Promise(((t,n)=>{e.addEventListener("load",(()=>{t()})),e.addEventListener("error",(()=>{n()}))}))}(t);const n=r(a,t,1e4);const o=await s.postMessage({k:3,iteration:20,img:n}),{label:c,cluster_center:i}=o,u=[...c].sort(((e,t)=>t-e))[0];!function(e){const t=document.querySelector('meta[name=theme-color][media="(prefers-color-scheme: light)"]');t&&(t.content=(n=e,`rgba(${n.map((e=>Math.floor(e))).join(",")})`));var n}(i[c.findIndex((e=>e==u))])}function i(){document.addEventListener("coverBG_change",(({detail:e})=>c(e)))}}}]);
//# sourceMappingURL=240.js.map